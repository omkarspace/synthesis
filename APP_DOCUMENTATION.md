# Synthesis Documentation

## 1. Overview
The **AI Research App** is a comprehensive platform designed to assist researchers in generating, managing, and analyzing research papers using advanced AI agents. It automates the research workflow from document reading to paper writing, providing a streamlined interface for managing projects, analyzing data, and visualizing concepts.

## 2. Key Features

### 2.1 Project Management
- **Create Projects**: Users can start new research projects with a title and description.
- **Dashboard**: A central hub displaying active projects, status, and progress.
- **Project Details**: Detailed view of each project, including documents, hypotheses, and generated content.
- **Progress Tracking**: Real-time progress bars for the AI pipeline.

### 2.2 Document Processing
- **File Upload**: Support for PDF and DOCX file uploads.
- **Text Extraction**: Automated extraction of text from uploaded documents using `pdf-parse` and `mammoth`.
- **Management**: View and manage uploaded documents within a project.

### 2.3 AI Agent Pipeline
The core of the application is an orchestrated pipeline of specialized AI agents:
1.  **Reader Agent**: Reads and processes raw text from documents.
2.  **Summarizer Agent**: Generates concise summaries of the processed content.
3.  **Graph Agent**: Analyzes concepts and builds a knowledge graph (Concept Network).
4.  **Hypothesis Agent**: Generates novel research hypotheses based on the knowledge graph.
5.  **Experiment Agent**: Designs experiments to test the generated hypotheses.
6.  **Writer Agent**: Synthesizes all information to write a comprehensive research paper.

### 2.4 Analytics & Visualization
- **Concept Network**: Interactive visualization of related concepts and their clusters.
- **Quality Metrics**: Charts tracking the quality, novelty, and feasibility of hypotheses.
- **Word Count Trends**: Analysis of generated content length over time.
- **Citation Analysis**: Tracking of references and citations.

### 2.5 Settings & Configuration
- **Profile Management**: User details.
- **Appearance**: Light/Dark mode toggles.
- **API Configuration**: Setup for AI providers (Gemini, OpenAI, Anthropic).

## 3. Technology Stack

### Frontend
- **Framework**: [Next.js 16](https://nextjs.org/) (App Router)
- **Library**: [React 19](https://react.dev/)
- **Styling**: [Tailwind CSS v4](https://tailwindcss.com/)
- **Icons**: [Lucide React](https://lucide.dev/)
- **Charts**: [Recharts](https://recharts.org/)
- **UI Components**: Custom components built with Tailwind (likely inspired by shadcn/ui).

### Backend
- **Runtime**: Node.js (via Next.js API Routes)
- **Database**: SQLite
- **ORM**: [Prisma](https://www.prisma.io/)
- **AI Integration**: [Google Generative AI SDK](https://www.npmjs.com/package/@google/generative-ai) (Gemini)

### Utilities
- **File Parsing**: `pdf-parse`, `mammoth`
- **Validation**: `zod`
- **Date Handling**: `date-fns`
- **Class Utilities**: `clsx`, `tailwind-merge`

## 4. System Architecture

### 4.1 Directory Structure
```
ai-research-app/
├── app/                    # Next.js App Router pages and API routes
│   ├── api/                # Backend API endpoints
│   ├── globals.css         # Global styles
│   ├── layout.tsx          # Root layout
│   └── page.tsx            # Main dashboard
├── components/             # React UI components
│   ├── ui/                 # Reusable UI elements (buttons, cards, etc.)
│   └── ...                 # Feature-specific components (charts, graphs)
├── hooks/                  # Custom React hooks (useProjects, useAnalytics)
├── lib/                    # Core business logic and utilities
│   ├── agents/             # AI Agent implementations
│   ├── gemini-client.ts    # AI API client wrapper
│   └── prisma.ts           # Database client instance
├── prisma/                 # Database schema and migrations
│   └── schema.prisma       # Data model definition
├── public/                 # Static assets
└── uploads/                # Directory for uploaded files
```

### 4.2 Data Model (Prisma)
- **Project**: The root entity containing metadata (name, status, progress).
- **Document**: Files associated with a project.
- **AgentRun**: Logs the execution, input, and output of each AI agent.
- **Hypothesis**: Research hypotheses generated by the AI.
- **ConceptNode**: Nodes representing the knowledge graph.

### 4.3 Agent Orchestration
The `AgentOrchestrator` (`lib/agents/orchestrator.ts`) manages the sequential execution of agents. It handles:
1.  State updates (Project status/progress).
2.  Data passing (Output of one agent becomes input for the next).
3.  Error handling and logging.
4.  Database persistence of results.

## 5. Setup & Installation

### Prerequisites
- Node.js (v18+ recommended)
- npm or yarn
- Google Gemini API Key

### Steps
1.  **Clone the repository**:
    ```bash
    git clone <repository-url>
    cd ai-research-app
    ```

2.  **Install dependencies**:
    ```bash
    npm install
    ```

3.  **Environment Setup**:
    Create a `.env` file in the root directory:
    ```env
    DATABASE_URL="file:./dev.db"
    GEMINI_API_KEY="your_api_key_here"
    ```

4.  **Database Setup**:
    Initialize the SQLite database:
    ```bash
    npx prisma generate
    npx prisma db push
    ```

5.  **Run the application**:
    ```bash
    npm run dev
    ```
    Access the app at `http://localhost:3000`.

## 6. API Reference

### Projects
- `GET /api/projects`: List all projects.
- `POST /api/projects`: Create a new project.
- `GET /api/projects/[id]`: Get project details.
- `DELETE /api/projects/[id]`: Delete a project.

### Upload
- `POST /api/upload`: Handle file uploads.

### Analytics
- `GET /api/analytics`: Fetch global analytics data.

### Agents
- `POST /api/agents/run`: Trigger the agent pipeline for a project (implied).

## 7. Development Notes
- **Linting**: Run `npm run lint` to check for code quality issues.
- **Type Checking**: TypeScript is strictly enforced.
- **Modifying Agents**: Edit files in `lib/agents/` to change prompt engineering or logic.
